{"version":3,"file":"js/createWorkplaceModule/createWorkplaceModule.js","mappings":";;;;;;;;;;;;;;;;;AAAsG;AACR;AACM;AACpG;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,sFAAgC;AAC7C;AACA,aAAa,kFAA4B;AACzC;AACA,aAAa,qFAA+B;AAC5C;AACA,8CAA8C,YAAY;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,eAAe,EAAC;;;;;;;;;;;;;;;AC3E/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,eAAe,EAAC;;;;;;;;;;;;;;;;ACZ/B;AACA;AACA,IAAI,CAAC;AACL;AACA,MAAM,CAAC;AACP,KAAK;AACL;AACA;AACA;AACA,IAAI,CAAC;AACL;AACA,MAAM,CAAC;AACP,KAAK;AACL;AACA;AACA;AACA,iEAAe,iBAAiB,EAAC;AACjC;AACA;;;;;;;;;;AClBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;ACNA,CAA2D;AACyB;AACxB;AAC5D,8BAA8B,iEAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,KAAK,kBAAkB;AACxB,2BAA2B,4EAAuB;AAClD,IAAI,CAAC;AACL,IAAI,CAAC;AACL,IAAI;AACJ,IAAI,CAAC;AACL,IAAI,CAAC;AACL;AACA,CAAC;AACD;AACA,CAAC,mCAAmC,kFAAe;AACnD,CAAC,kCAAkC,kFAAe;AAClD;AACA;AACA,SAAS,CAAC;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,CAAC;AACd;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qFAAgC,GAAG;AAClE;AACA;AACA;AACA;AACA,0BAA0B,CAAC;AAC3B,kCAAkC,CAAC;AACnC;AACA,EAAE,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,CAAC;AACP;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,CAAC;AAC3B,0BAA0B,CAAC;AAC3B,+BAA+B,CAAC;AAChC;AACA,EAAE,CAAC;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,CAAC;AACP,MAAM,CAAC;AACP,MAAM,CAAC;AACP,MAAM,CAAC;AACP;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC,oD","sources":["webpack://webpack-mvc/./source/js/application/appConfig.js","webpack://webpack-mvc/./source/js/infrastructure/filesystem/imageProcessing.js","webpack://webpack-mvc/./source/js/presentation/timereporting.web/views/shared/appModalPresenter.js","webpack://webpack-mvc/external var \"jQuery\"","webpack://webpack-mvc/webpack/bootstrap","webpack://webpack-mvc/webpack/runtime/define property getters","webpack://webpack-mvc/webpack/runtime/hasOwnProperty shorthand","webpack://webpack-mvc/webpack/runtime/make namespace object","webpack://webpack-mvc/./source/js/presentation/timereporting.web/views/workplace/createWorkplaceModule.js"],"sourcesContent":["import appSettingsDevelopment from '../../../../../../Timereporting.Web/appsettings.DEVELOPMENT.json';\r\nimport appSettingsStaging from '../../../../../../Timereporting.Web/appsettings.STAGING.json';\r\nimport appSettingsProduction from '../../../../../../Timereporting.Web/appsettings.PRODUCTION.json';\r\n\r\nconst Environment = \"DEVELOPMENT\";\r\n\r\nconst getConfigurationByEnvironment = (environment) => {\r\n  switch (environment) {\r\n    case 'DEVELOPMENT':\r\n      return appSettingsDevelopment.AppConfig;\r\n    case 'STAGING':\r\n      return appSettingsStaging.AppConfig;\r\n    case 'PRODUCTION':\r\n      return appSettingsProduction.AppConfig;\r\n    default:\r\n      throw new Error(`Invalid environment: ${environment}`);\r\n  }\r\n};\r\n\r\nclass AppConfig {\r\n  constructor() {\r\n    this.config = null;\r\n    this.loadConfig();\r\n  }\r\n\r\n  loadConfig() {\r\n    const environmentConfig = getConfigurationByEnvironment(Environment);\r\n    this.config = { ...this.config, ...environmentConfig };\r\n  }\r\n\r\n  getAppBaseName() {\r\n    return this.config.AppBaseName;\r\n  }\r\n\r\n  getAppBaseUrl() {\r\n    return this.config.AppBaseUrl;\r\n  }\r\n\r\n  getAppEnvironment() {\r\n    return this.config.AppEnvironment;\r\n  }\r\n\r\n  getAppLogLevel() {\r\n    return this.config.AppLogLevel;\r\n  }\r\n\r\n  getAppVersion() {\r\n    return this.config.AppVersion;\r\n  }\r\n\r\n  getAppResourceHostingUrl() {\r\n    return this.config.AppResourceHostingUrl;\r\n  }\r\n\r\n  getAppImageFileDirectory() {\r\n    return this.config.AppImageFileDirectory;\r\n  }\r\n\r\n  getApiBaseName() {\r\n    return this.config.ApiBaseName;\r\n  }\r\n\r\n  getApiBaseUrl() {\r\n    return this.config.ApiBaseUrl;\r\n  }\r\n\r\n  getApiAuthorizationKey() {\r\n    return this.config.ApiAuthorizationKey;\r\n  }\r\n\r\n  getApiVersion() {\r\n    return this.config.ApiVersion;\r\n  }\r\n}\r\n\r\nexport default new AppConfig();\r\n","class ImageProcessing {\r\n  // Function to open the image file dialog\r\n  openImageFileDialog() {\r\n    document.getElementById('image-input').click();\r\n  }\r\n  \r\n  // Function to preview the image\r\n  previewImage(event) {\r\n    document.getElementById(\"image-preview\").src = URL.createObjectURL(event.target.files[0]);\r\n  }\r\n}\r\n\r\nexport default ImageProcessing;\r\n","class AppModalPresenter {\r\n  showFailureModal(delay) {\r\n    $('#submission-failed-modal').modal('show');\r\n    setTimeout(function() {\r\n      $('#submission-failed-modal').modal('hide');\r\n    }, delay);\r\n  }\r\n\r\n  showSuccessModal(delay) {\r\n    $('#submission-successful-modal').modal('show');\r\n    setTimeout(function() {\r\n      $('#submission-successful-modal').modal('hide');\r\n    }, delay);\r\n  }\r\n}\r\n\r\nexport default AppModalPresenter;\r\n\r\n  ","module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","﻿import appConfig from \"../../../../application/appConfig\";\r\nimport ImageProcessing from \"../../../../infrastructure/filesystem/imageProcessing\";\r\nimport AppModalPresenter from '../shared/appModalPresenter';\r\nconst appModalPresenter = new AppModalPresenter();\r\n\r\nconst endpointElementId = 'api-endpoint';\r\n\r\nfunction getApiEndpoint() {\r\n  return document.getElementById(endpointElementId).value;\r\n}\r\n\r\n$(`#${endpointElementId}`).on('change', async function() {\r\n  if (getApiEndpoint() === appConfig.getApiBaseUrl()) {\r\n    $('.info-option').addClass('hidden');\r\n    $('.image-option').addClass('hidden');\r\n  } else {\r\n    $('.info-option').removeClass('hidden');\r\n    $('.image-option').removeClass('hidden');\r\n  }\r\n});\r\n\r\n$('#image-preview').on('click', new ImageProcessing().openImageFileDialog);\r\n$('#image-input').on('change', new ImageProcessing().previewImage);\r\n\r\nfunction shouldSubmitToTrinaxApi() {\r\n  return $('#api-endpoint')[0].selectedIndex === 0;\r\n}\r\n\r\nshouldSubmitToTrinaxApi();\r\n\r\n// Function to handle form submission\r\nfunction submitWorkplaceForm(event) {\r\n  event.preventDefault();\r\n  var form = $('#create-workplace-form');\r\n  form.validate();\r\n  if (!form.valid()) {\r\n    return;\r\n  } else {\r\n    // Call the appropriate submitWorkplace function based on the condition\r\n    if (shouldSubmitToTrinaxApi()) {\r\n      submitWorkplaceToTrinaxApi();\r\n    } else {\r\n      submitWorkplaceToFallbackApi();\r\n    }\r\n  }\r\n}\r\n\r\n// Function to submit workplace to Trinax API\r\nfunction submitWorkplaceToTrinaxApi() {\r\n  var url = 'https://arbetsprov.trinax.se/api/v1/workplace';\r\n  var headers = {\r\n    'Authorization': `bearer ${appConfig.getApiAuthorizationKey()}`,\r\n    'Accept': 'application/json'\r\n  };\r\n\r\n  var formData = new FormData();\r\n  formData.append('name', $('#name').val());\r\n  formData.append('created_time', $('#info').val());\r\n\r\n  $.ajax({\r\n    type: 'POST',\r\n    contentType: false,\r\n    processData: false,\r\n    url: url,\r\n    headers: headers,\r\n    data: formData,\r\n    success: function() {\r\n      // Handle success\r\n      $('#name').val('');\r\n      appModalPresenter.showSuccessModal(5000);\r\n      setTimeout(function() {\r\n        window.location.replace('/Workplace/PreviewWorkplace');\r\n      }, 5000);\r\n    },\r\n    error: function() {\r\n      // Handle error\r\n      appModalPresenter.showFailureModal(5000);\r\n      setTimeout(function() {\r\n        window.location.reload();\r\n      }, 5000);\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// Function to submit workplace as a fallback\r\nfunction submitWorkplaceToFallbackApi() {\r\n  var url = 'http://localhost:5000/api/v1/workplace';\r\n  var headers = {};\r\n\r\n  var formData = new FormData();\r\n  formData.append('name', $('#name').val());\r\n  formData.append('info', $('#info').val());\r\n  formData.append('imageFile', $('#image-input')[0].files[0]);\r\n\r\n  $.ajax({\r\n    type: 'POST',\r\n    contentType: false,\r\n    processData: false,\r\n    url: url,\r\n    headers: headers,\r\n    data: formData,\r\n    success: function() {\r\n      // Handle success\r\n      $('#name').val('');\r\n      $('#info').val('');\r\n      $('#image-input').val('');\r\n      $('.success').html('Arbetsplatsen har skickats framgångsrikt!');\r\n      appModalPresenter.showSuccessModal(5000);\r\n      setTimeout(function() {\r\n        window.location.replace('/Workplace/PreviewWorkplace');\r\n      }, 5000);\r\n    },\r\n    error: function() {\r\n      // Handle error\r\n      appModalPresenter.showFailureModal(5000);\r\n      setTimeout(function() {\r\n        window.location.reload();\r\n      }, 5000);\r\n    }\r\n  });\r\n}\r\n\r\n// Event listener for submit button click\r\n$('#submit-button').on('click', submitWorkplaceForm);"],"names":[],"sourceRoot":""}